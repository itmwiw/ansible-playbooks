ansible_ssh_private_key_file: ~/.ssh/mykey
ansible_user: root

dhcpd:
  - if: lan
    settings:
    - key: enable
      value: 0

virtualip:
  - vhid: 1
    settings:
    - key: interface
      value: wan
    - key: mode
      value: carp
    - key: subnet
      value: 192.168.102.253
    - key: subnet_bits
      value: 24
    - key: descr
      value: 'Virtual Wan IP'
  - vhid: 3
    settings:
    - key: interface
      value: lan
    - key: mode
      value: carp
    - key: subnet
      value: 192.168.1.1
    - key: subnet_bits
      value: 24
    - key: descr
      value: 'Virtual Lan IP'

filter:
  - descr: 'allow carp on WAN interface'
    settings:
    - key: type
      value: pass
    - key: interface
      value: wan
    - key: ipprotocol
      value: inet
    - key: statetype
      value: 'keep state'
    - key: direction
      value: in
    - key: quick
      value: 1
    - key: protocol
      value: carp
    - key: source/any
      value: 1
    - key: destination/any
      value: 1
  - descr: 'allow carp on LAN interface'
    settings:
    - key: type
      value: pass
    - key: interface
      value: lan
    - key: ipprotocol
      value: inet
    - key: statetype
      value: 'keep state'
    - key: direction
      value: in
    - key: quick
      value: 1
    - key: protocol
      value: carp
    - key: source/any
      value: 1
    - key: destination/any
      value: 1
  - descr: 'allow all on PFSYNC interface'
    settings:
    - key: type
      value: pass
    - key: interface
      value: opt1
    - key: ipprotocol
      value: inet
    - key: statetype
      value: 'keep state'
    - key: direction
      value: in
    - key: quick
      value: 1
    - key: source/any
      value: 1
    - key: destination/any
      value: 1

nat:
  outbound:
    mode: advanced
    rules:
    - descr: 'Nat to virtual Wan IP'
      settings:
      - key: source/network
        value: lan
      - key: interface
        value: wan
      - key: target
        value: 192.168.102.253

